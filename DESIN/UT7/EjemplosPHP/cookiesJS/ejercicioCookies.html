<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ejercicio de cookies</title>
</head>

<body>
    <button type="button" id="verTodas">Ver todas las cookies</button>
    <button type="button" id="crearCookie">Crear cookie</button>
    <button type="button" id="modificarCookie">Modificar cookie</button>
    <button type="button" id="leerCookie">Leer cookie</button>
    <button type="button" id="borrarCookie">Borrar cookie</button>

    <script>
        const verTodas = document.getElementById("verTodas");
        const crearCookie = document.getElementById("crearCookie");
        const modificarCookie = document.getElementById("modificarCookie");
        const leerCookie = document.getElementById("leerCookie");
        const borrar = document.getElementById("borrarCookie");

        verTodas.addEventListener("click", function (e) {
            e.preventDefault();
            verCookies();
        });

        crearCookie.addEventListener("click", function (e) {
            e.preventDefault();
            crearModifCookie();
        });

        modificarCookie.addEventListener('click', function(e) {
            e.preventDefault();
            crearModifCookie();
        });

        leerCookie.addEventListener('click', function(e) {
            e.preventDefault();
            leerUnaCookie();
        })

        borrar.addEventListener('click', function (e) {
            e.preventDefault();
            borrarCookie();
        });


        function verCookies(name = null) {
            const cookieArray = document.cookie.split(";");

            if (cookieArray.length === 1 && cookieArray[0] === "") {
                console.log("No hay cookies");
                return;
            }

            cookieArray.forEach(cookie => {
                const [key, value] = cookie.split("=");
                if (!name || key.trim() === name) {
                    console.log(key.trim() + " = " + decodeURIComponent(value));
                }
            });
        }

        function crearModifCookie() {
            let nombre = prompt("Introduce el nombre de la cookie");
            let valor = prompt("Introduce el valor de la cookie");
            let dias = parseInt(prompt("Introduce la cantidad de días de vida de la cookie"));
            setCookie(nombre, valor, dias);
            return;
        }

        function setCookie(name, value, daysToLive) {
            let cookie = `${name}=${encodeURIComponent(value)}`;
            if (typeof daysToLive === "number") {
                cookie += `; max-age=${daysToLive * 24 * 60 * 60}`; // días → segundos
            }
            document.cookie = cookie;
        }

        function leerUnaCookie() {
            let nombre = prompt("Introduce el nombre de la cookie a leer");
            verCookies(nombre);
        }

        function borrarCookie() {
            let borrarNombre = prompt("Introduce el nombre de la cookie que deseas borrar");
            document.cookie = `${borrarNombre}=; max-age=0`;
            console.log("Cookie borrada:", borrarNombre);
        }
    </script>
</body>

</html>